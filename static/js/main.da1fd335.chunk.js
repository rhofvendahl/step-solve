(this["webpackJsonpstep-solve"]=this["webpackJsonpstep-solve"]||[]).push([[0],[,,,,,,,,,function(e,r,t){},function(e,r,t){},,function(e,r,t){},function(e,r,t){},function(e,r,t){},function(e,r,t){},function(e,r,t){},function(e,r,t){"use strict";t.r(r);var n=t(1),o=t.n(n),a=t(4),i=t.n(a),l=(t(9),t(2)),u=(t(10),t(0)),s=["#CC0B00","#E69138","#F1C231","#6AA850","#3D85C6","#674FA7"],c=function(e){var r=e.content;return Object(u.jsx)(u.Fragment,{children:r})},p=(t(12),function(e){var r=e.value,t=e.onChange;return Object(u.jsx)(c,{content:Object(u.jsx)("div",{className:"item input",children:Object(u.jsx)("input",{type:"text",value:r,onChange:function(e){return t(e)}})})})}),v=(t(13),function(e){var r=e.initial,t=void 0!==r&&r,n=e.step,o=e.index,a=n.computeNext||{start:0,end:0},i=n.tokens.map((function(e,r){return{token:e,index:r}})),l=n.computed?s[(o-1)%s.length]:"white",p=n.computeNext?s[o%s.length]:"white";console.log(o,l,p);var v=function(e){var r=e.token,t=e.index,o=r.value.toString();return null!==n.computed&&t===n.computed.start?Object(u.jsx)("span",{className:"computed",style:{color:l,fontWeight:"bold"},children:o},t):Object(u.jsx)("span",{children:o},t)};return Object(u.jsx)(c,{content:function(){var e=i.slice(0,a.start).map(v),r=i.slice(a.end).map(v),n=i.slice(a.start,a.end).map(v),o=Object(u.jsx)(u.Fragment,{});return n.length>0&&(o=Object(u.jsx)("span",{className:"compute-next",style:{border:"2px solid "+p},children:n})),Object(u.jsx)("div",{className:t?"item step step-initial":"item step step-next",children:Object(u.jsxs)("span",{className:"expression",children:[e,o,r]})})}()})}),f=(t(14),function(e){var r=e.description,t=e.index,n=s[t%s.length];return Object(u.jsx)(c,{content:Object(u.jsx)("div",{className:"item description",style:{color:n},children:r})})}),h=function(e){var r=e.map((function(e){return e.value.toString()})).join(" ");return r=r.split("neg (").join("-(")},d=function(e){if(isNaN(Number(e))||""===e)throw new Error("User Error: Literal not recognized.");return 2===e.split(".").length?{type:"number",value:parseFloat(e)}:{type:"number",value:parseInt(e)}},g=function(e){for(var r=[],t=0;t<e.length;t++)if("neg"===e[t].value){if(t+1>=e.length)throw new Error('Internal Error: Expression cannot end with a "neg" operator.');var n=e[t+1];if("("===n.value)r.push({type:"operator",value:"neg"});else{if("number"!=typeof n.value)throw new Error('Internal Error: "neg"s must be followed by "(" or a number.');var o=-1*n.value;0===n.value&&(o=0),r.push({type:"number",value:o}),t+=1}}else r.push({type:e[t].type,value:e[t].value});return r},m=function(e){if(1===e.length){if("operator"===e[0].type)throw new Error("User Error: Expression cannot consist only of an operator.");return[{type:"number",value:e[0].value}]}for(var r=e.map((function(e){return e.value})),t=["^","*","/","+","-"],n=-1,o=0;o<t.length;o++)if(r.includes(t[o])){n=r.indexOf(t[o]);break}if(void 0===n)throw new Error("User Error: Multiple tokens in expression with no operator.");if(0===n)throw new Error("User Error: Expression cannot start with an operator.");if(n===e.length-1)throw new Error("User Error: Expression cannot end with an operator.");var a=void 0,i=e[n-1],l=e[n+1],u=e[n];if("number"!==typeof i.value||"number"!==typeof l.value)throw new Error('User Error: "'+u.value+'" operator requires numeric operands.');var s=void 0;if("^"===u.value?s=Math.pow(i.value,l.value):"*"===u.value?s=i.value*l.value:"/"===u.value?s=i.value/l.value:"+"===u.value?s=i.value+l.value:"-"===u.value&&(s=i.value-l.value),void 0===s)throw new Error('Internal Error: "'+u.value+'" operator not recognized.');if(void 0===(a={type:"number",value:s}))throw new Error("Internal error: performSimpleOperation function failed.");var c=e.slice(0,n-1).map((function(e){return{type:e.type,value:e.value}})),p=e.slice(n+2).map((function(e){return{type:e.type,value:e.value}}));return c.concat([a]).concat(p)},b=function(e){for(var r=void 0,t=void 0,n=0;n<e.length;n++)if("("===e[n].value)r=n;else if(")"===e[n].value){t=n;break}if(void 0===r!==(void 0===t))throw new Error("User Error: Mismatched parentheses.");var o=void 0;if(void 0!==r&&void 0!==t){var a=e.slice(r+1,t);if(0===a.length)throw new Error("User Error: Parentheses cannot be empty.");var i=m(a);if(1===i.length&&"number"===i[0].type){var l=e.slice(0,r).map((function(e){return{type:e.type,value:e.value}})),u=e.slice(t+1).map((function(e){return{type:e.type,value:e.value}}));o=l.concat(i).concat(u)}else{var s=e.slice(0,r+1).map((function(e){return{type:e.type,value:e.value}})),c=e.slice(t).map((function(e){return{type:e.type,value:e.value}}));o=s.concat(i).concat(c)}}else o=m(e);if(void 0!==o)return o=g(o);throw new Error('Internal Error: "performOperation" function failed.')},j=function(e,r){for(var t=e.length-1,n=r.length-1;t>=0&&n>=0&&e[t].value===r[n].value;)t-=1,n-=1;"operator"===e[t].type&&")"!==e[t].value&&(t+=1,n+=1);var o={start:n,end:n+1},a=t;if(")"===e[t].value){for(;a>=0&&"("!==e[a].value;)a-=1;a>0&&"neg"===e[a-1].value&&(a-=1)}else a-=2;for(var i={start:a,end:t+1},l=e.slice(a,t+1),u=0;u<l.length;u++){var s=l[u];if("operator"===s.type&&"string"===typeof s.value&&!["neg","(",")"].includes(s.value))break}0===u||l.length;var c=void 0;if(console.log("DESCRIBE OPERATION"),console.log("input tokens",h(l)),console.log("operator index",u),0===u||u===l.length-1)throw new Error('Internal Error: "describeOperation" function recieved a misplaced operator.');if(u===l.length)c="resolve parentheses";else if(u<l.length){var p=l[u-1].value,v=l[u+1].value;if("number"!==typeof p||"number"!==typeof v)throw new Error('Internal Error: "describeOperation" function received invalid operands.');"^"===l[u].value?c="raise "+l[u-1].value.toString()+" to the "+function(e){var r=e.toString();if(e%1!==0)return r+"th";var t=parseInt(r.charAt(r.length-1)),n=e%100,o="th";return 1===t&&11!==n?o="st":2===t&&12!==n?o="nd":3===t&&13!==n&&(o="rd"),r+o}(v)+" power":"*"===l[u].value?c="multiply "+l[u-1].value.toString()+" by "+l[u+1].value.toString():"/"===l[u].value?c="divide "+l[u-1].value.toString()+" by "+l[u+1].value.toString():"+"===l[u].value?c="add "+l[u+1].value.toString()+" to "+l[u-1].value.toString():"-"===l[u].value&&(c="subtract "+l[u+1].value.toString()+" from "+l[u-1].value.toString())}if(void 0===c)throw new Error('Internal Error: function "describeOperation" failed.');return{operationInput:i,operationOutput:o,operationDescription:c}},x=function(e){try{var r=function(e){for(var r=[],t=0;t<e.length;t++)if(isNaN(parseInt(e.charAt(t)))&&"."!==e.charAt(t)){if("()^*/+-".includes(e.charAt(t))){var n={type:"operator",value:e.charAt(t)};r.push(n)}else if(" "!==e.charAt(t))throw new Error('User Error: "'+e[t]+'" is not a valid character.')}else{for(var o=t;o<e.length&&(!isNaN(parseInt(e.charAt(o)))||"."===e.charAt(o));)o+=1;var a=e.slice(t,o),i=d(a);r.push(i),t=o-1}return r}(e);if(r=function(e){for(var r=[],t=0;t<e.length;t++)if("-"===e[t].value){var n=!0;(t+1===e.length||"operator"===e[t+1].type&&"("!==e[t+1].value||t>0&&"number"===e[t-1].type||t+2<e.length&&"^"===e[t+2].value)&&(n=!1),n?r.push({type:"operator",value:"neg"}):r.push({type:"operator",value:"-"})}else r.push({type:e[t].type,value:e[t].value});return r}(r),0===(r=g(r)).length)return[];if(1===r.length&&"operator"===r[0].type)throw new Error("User Error: Expression cannot consist of a single operator.");for(var t={tokens:r,description:"[Initial description.]",computeNext:null,computed:null},n=[];t.tokens.length>1;){var o=b(t.tokens),a=j(t.tokens,o),i=a.operationInput,l=a.operationOutput,u=a.operationDescription;t.computeNext=i,n.push(t),t={computeNext:null,tokens:o,description:u,computed:l}}return n.push(t),n}catch(s){return s}},y=(t(15),function(){var e=o.a.useState(""),r=Object(l.a)(e,2),t=r[0],n=r[1],a=o.a.useState(null),i=Object(l.a)(a,2),s=i[0],c=i[1],d=o.a.useState(null),g=Object(l.a)(d,2),m=g[0],b=g[1],j=function(e){n(e);var r=x(e);r instanceof Error?(console.log(r.message),c(null),b(r)):(r.forEach((function(e){console.log(h(e.tokens))})),c(r),b(null))};o.a.useEffect((function(){j("")}),[]);return Object(u.jsxs)("div",{className:"solver",children:[Object(u.jsxs)("div",{className:"solver-left",children:[Object(u.jsx)(p,{value:t,onChange:function(e){var r=e.target.value;j(r)}}),null!==s&&s.length>1?s.slice(1).map((function(e,r){return Object(u.jsx)(f,{description:e.description,index:r},r)})):null]}),Object(u.jsx)("div",{className:"solver-right",children:null!==s&&0===s.length?null:null!==s&&s.length>0?Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(v,{initial:!0,step:s[0],index:0},0),s.slice(1).map((function(e,r){return Object(u.jsx)(v,{step:e,index:r+1},r+1)}))]}):null}),null===m?null:Object(u.jsx)("div",{className:"error",children:m.message})]})}),E=(t(16),function(){return Object(u.jsx)("div",{className:"app",children:Object(u.jsx)(y,{})})});i.a.render(Object(u.jsx)(o.a.StrictMode,{children:Object(u.jsx)(E,{})}),document.getElementById("root"))}],[[17,1,2]]]);
//# sourceMappingURL=main.da1fd335.chunk.js.map