(this["webpackJsonpstep-solve"]=this["webpackJsonpstep-solve"]||[]).push([[0],[,,,,,,,,,function(e,r,t){},function(e,r,t){},,function(e,r,t){},function(e,r,t){},function(e,r,t){},function(e,r,t){},function(e,r,t){},function(e,r,t){"use strict";t.r(r);var n=t(1),o=t.n(n),a=t(4),l=t.n(a),i=(t(9),t(2)),u=(t(10),t(0)),s=function(e){var r=e.value,t=e.onChange;return Object(u.jsx)("div",{className:"input",children:Object(u.jsx)("input",{type:"text",value:r,onChange:function(e){return t(e)}})})},c=["#CC0B00","#E69138","#F1C231","#6AA850","#3D85C6","#674FA7"],p=(t(12),function(e){var r=e.initial,t=void 0!==r&&r,n=e.step,o=e.index,a=n.computeNext||{start:0,end:0},l=n.tokens.map((function(e,r){return{token:e,index:r}})),i=n.computed?c[(o-1)%c.length]:"white",s=n.computeNext?c[o%c.length]:"white";console.log(o,i,s);var p=function(e){var r=e.token,t=e.index,o=r.value.toString();return t>0&&"neg"!==n.tokens[t-1].value&&(o=" "+o)," neg"===o&&(o=" -"),null!==n.computed&&t===n.computed.start?Object(u.jsx)("span",{className:"computed",style:{color:i,fontWeight:"bold"},children:o},t):Object(u.jsx)("span",{children:o},t)},v=l.slice(0,a.start).map(p),f=l.slice(a.end).map(p),h=l.slice(a.start,a.end).map(p),d=Object(u.jsx)(u.Fragment,{});return h.length>0&&(d=Object(u.jsx)("span",{className:"compute-next",style:{border:"2px solid "+s},children:h})),Object(u.jsx)("div",{className:t?"step step-initial":"step step-next",children:Object(u.jsxs)("span",{className:"expression",children:[v,d,f]})})}),v=(t(13),function(e){var r=e.description,t=e.index,n=c[t%c.length];return Object(u.jsx)("div",{className:"description",style:{color:n},children:r})}),f=(t(14),function(e){var r=e.error;return null===r?null:Object(u.jsx)("div",{className:"error",children:function(e){var r=e;return r.split("Internal Error").length>1||"."===(r=(r=r.split("User Error: ").join("")).toLowerCase()).charAt(r.length-1)&&(r=r.slice(0,r.length-1)),r}(r.message)})}),h=function(e){var r=e.map((function(e){return e.value.toString()})).join(" ");return r=r.split("neg (").join("-(")},d=function(e){if(isNaN(Number(e))||""===e)throw new Error("User Error: Literal not recognized.");return 2===e.split(".").length?{type:"number",value:parseFloat(e)}:{type:"number",value:parseInt(e)}},g=function(e){for(var r=[],t=0;t<e.length;t++)if("neg"===e[t].value){if(t+1>=e.length)throw new Error('Internal Error: Expression cannot end with a "neg" operator.');var n=e[t+1];if("("===n.value)r.push({type:"operator",value:"neg"});else{if("number"!=typeof n.value)throw new Error('Internal Error: "neg"s must be followed by "(" or a number.');var o=-1*n.value;0===n.value&&(o=0),r.push({type:"number",value:o}),t+=1}}else r.push({type:e[t].type,value:e[t].value});return r},m=function(e){if(1===e.length){if("operator"===e[0].type)throw new Error("User Error: Expression cannot consist only of an operator.");return[{type:"number",value:e[0].value}]}for(var r=e.map((function(e){return e.value})),t=["^","*","/","+","-"],n=-1,o=0;o<t.length;o++)if(r.includes(t[o])){n=r.indexOf(t[o]);break}if(void 0===n)throw new Error("User Error: Multiple tokens in expression with no operator.");if(0===n)throw new Error("User Error: Expression cannot start with an operator.");if(n===e.length-1)throw new Error("User Error: Expression cannot end with an operator.");var a=void 0,l=e[n-1],i=e[n+1],u=e[n];if("number"!==typeof l.value||"number"!==typeof i.value)throw new Error('User Error: "'+u.value+'" operator requires numeric operands.');var s=void 0;if("^"===u.value){if(l.value<0&&i.value%1!==0)throw new Error("User Error: "+l.value.toString()+"^"+i.value.toString()+" results in an imaginary number, which is not supported.");s=Math.pow(l.value,i.value)}else"*"===u.value?s=l.value*i.value:"/"===u.value?s=l.value/i.value:"+"===u.value?s=l.value+i.value:"-"===u.value&&(s=l.value-i.value);if(void 0===s)throw new Error('Internal Error: "'+u.value+'" operator not recognized.');if(void 0===(a={type:"number",value:s}))throw new Error("Internal error: performSimpleOperation function failed.");var c=e.slice(0,n-1).map((function(e){return{type:e.type,value:e.value}})),p=e.slice(n+2).map((function(e){return{type:e.type,value:e.value}}));return c.concat([a]).concat(p)},b=function(e){for(var r=void 0,t=void 0,n=0;n<e.length;n++)if("("===e[n].value)r=n;else if(")"===e[n].value){t=n;break}if(void 0===r!==(void 0===t))throw new Error("User Error: Mismatched parentheses.");var o=void 0;if(void 0!==r&&void 0!==t){var a=e.slice(r+1,t);if(0===a.length)throw new Error("User Error: Parentheses cannot be empty.");var l=m(a);if(1===l.length&&"number"===l[0].type){var i=e.slice(0,r).map((function(e){return{type:e.type,value:e.value}})),u=e.slice(t+1).map((function(e){return{type:e.type,value:e.value}}));o=i.concat(l).concat(u)}else{var s=e.slice(0,r+1).map((function(e){return{type:e.type,value:e.value}})),c=e.slice(t).map((function(e){return{type:e.type,value:e.value}}));o=s.concat(l).concat(c)}}else o=m(e);if(void 0!==o)return o=g(o);throw new Error('Internal Error: "performOperation" function failed.')},j=function(e,r){for(var t=e.length-1,n=r.length-1;t>=0&&n>=0&&e[t].value===r[n].value;)t-=1,n-=1;"operator"===e[t].type&&")"!==e[t].value&&(t+=1,n+=1);var o={start:n,end:n+1},a=t;if(")"===e[t].value){for(;a>=0&&"("!==e[a].value;)a-=1;a>0&&"neg"===e[a-1].value&&(a-=1)}else a-=2;for(var l={start:a,end:t+1},i=e.slice(a,t+1),u=0;u<i.length;u++){var s=i[u];if("operator"===s.type&&"string"===typeof s.value&&!["neg","(",")"].includes(s.value))break}0===u||i.length;var c=void 0;if(console.log("DESCRIBE OPERATION"),console.log("input tokens",h(i)),console.log("operator index",u),0===u||u===i.length-1)throw new Error('Internal Error: "describeOperation" function recieved a misplaced operator.');if(u===i.length)c="resolve parentheses";else if(u<i.length){var p=i[u-1].value,v=i[u+1].value;if("number"!==typeof p||"number"!==typeof v)throw new Error('Internal Error: "describeOperation" function received invalid operands.');"^"===i[u].value?c="raise "+i[u-1].value.toString()+" to the "+function(e){var r=e.toString();if(e%1!==0)return r+"th";var t=parseInt(r.charAt(r.length-1)),n=e%100,o="th";return 1===t&&11!==n?o="st":2===t&&12!==n?o="nd":3===t&&13!==n&&(o="rd"),r+o}(v)+" power":"*"===i[u].value?c="multiply "+i[u-1].value.toString()+" by "+i[u+1].value.toString():"/"===i[u].value?c="divide "+i[u-1].value.toString()+" by "+i[u+1].value.toString():"+"===i[u].value?c="add "+i[u+1].value.toString()+" to "+i[u-1].value.toString():"-"===i[u].value&&(c="subtract "+i[u+1].value.toString()+" from "+i[u-1].value.toString())}if(void 0===c)throw new Error('Internal Error: function "describeOperation" failed.');return{operationInput:l,operationOutput:o,operationDescription:c}},E=function(e){try{var r=function(e){for(var r=[],t=0;t<e.length;t++)if(isNaN(parseInt(e.charAt(t)))&&"."!==e.charAt(t)){if("()^*/+-".includes(e.charAt(t))){var n={type:"operator",value:e.charAt(t)};r.push(n)}else if(" "!==e.charAt(t))throw new Error('User Error: "'+e[t]+'" is not a valid character.')}else{for(var o=t;o<e.length&&(!isNaN(parseInt(e.charAt(o)))||"."===e.charAt(o));)o+=1;var a=e.slice(t,o),l=d(a);r.push(l),t=o-1}return r}(e);if(r=function(e){for(var r=[],t=0;t<e.length;t++)if("-"===e[t].value){var n=!0;(t+1===e.length||"operator"===e[t+1].type&&"("!==e[t+1].value||t>0&&"number"===e[t-1].type||t+2<e.length&&"^"===e[t+2].value)&&(n=!1),n?r.push({type:"operator",value:"neg"}):r.push({type:"operator",value:"-"})}else r.push({type:e[t].type,value:e[t].value});return r}(r),0===(r=g(r)).length)return[];if(1===r.length&&"operator"===r[0].type)throw new Error("User Error: Expression cannot consist of a single operator.");for(var t={tokens:r,description:"[Initial description.]",computeNext:null,computed:null},n=[];t.tokens.length>1;){var o=b(t.tokens),a=j(t.tokens,o),l=a.operationInput,i=a.operationOutput,u=a.operationDescription;t.computeNext=l,n.push(t),t={computeNext:null,tokens:o,description:u,computed:i}}return n.push(t),n}catch(s){return s}},w=(t(15),function(){var e=o.a.useState(""),r=Object(i.a)(e,2),t=r[0],n=r[1],a=o.a.useState(null),l=Object(i.a)(a,2),c=l[0],d=l[1],g=o.a.useState(null),m=Object(i.a)(g,2),b=m[0],j=m[1],w=function(e){n(e);var r=E(e);r instanceof Error?(console.log(r.message),d(null),j(r)):(r.forEach((function(e){console.log(h(e.tokens))})),d(r),j(null))};o.a.useEffect((function(){w("1-2+-(4/2-1)^3*2")}),[]);return Object(u.jsxs)("div",{className:"solver",children:[Object(u.jsxs)("div",{className:"solver-left",children:[Object(u.jsx)(s,{value:t,onChange:function(e){var r=e.target.value;w(r)}}),null!==c&&c.length>1?c.slice(1).map((function(e,r){return Object(u.jsx)(v,{description:e.description,index:r},r)})):null]}),Object(u.jsx)("div",{className:"solver-right",children:null!==c&&0===c.length?null:null!==c&&c.length>0?Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(p,{initial:!0,step:c[0],index:0},0),c.slice(1).map((function(e,r){return Object(u.jsx)(p,{step:e,index:r+1},r+1)}))]}):null}),Object(u.jsx)(f,{error:b})]})}),y=(t(16),function(){return Object(u.jsx)("div",{className:"app",children:Object(u.jsx)(w,{})})});l.a.render(Object(u.jsx)(o.a.StrictMode,{children:Object(u.jsx)(y,{})}),document.getElementById("root"))}],[[17,1,2]]]);
//# sourceMappingURL=main.51673a84.chunk.js.map