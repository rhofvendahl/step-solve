(this["webpackJsonpstep-solve"]=this["webpackJsonpstep-solve"]||[]).push([[0],[,,,,,,,,,function(e,t,r){},function(e,t,r){},,function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){"use strict";r.r(t);var n=r(1),o=r.n(n),a=r(4),l=r.n(a),u=(r(9),r(2)),i=(r(10),r(0)),s=function(e){var t=e.value,r=e.onChange;return Object(i.jsx)("div",{className:"input",children:Object(i.jsx)("input",{type:"text",value:t,onChange:function(e){return r(e)}})})},c=["#CC0B00","#E69138","#F1C231","#6AA850","#3D85C6","#674FA7"],p=function(e){if(isNaN(Number(e))||""===e)throw new Error("User Error: Literal not recognized.");return 2===e.split(".").length?{type:"number",value:parseFloat(e)}:{type:"number",value:parseInt(e)}},v=function(e){for(var t=[],r=0;r<e.length;r++)if("neg"===e[r].value){if(r+1>=e.length)throw new Error('Internal Error: Expression cannot end with a "neg" operator.');if("number"!==e[r+1].type&&"("!==e[r+1].value)throw new Error('Internal Error: "neg"s must be followed by "(" or a number.');var n=e[r+1];if("number"!==typeof n.value||r+2<e.length&&"^"===e[r+2].value)t.push({type:"operator",value:"neg"});else{var o=-1*n.value;-0===o&&(o=0),t.push({type:"number",value:o}),r+=1}}else t.push({type:e[r].type,value:e[r].value});return t},h=function(e,t){var r=e;return r=r%1!==0&&r.toString().split(".")[1].length>t?parseFloat(e.toFixed(t)).toString()+"...":e.toString()},d=function(e){if(1===e.length){if("operator"===e[0].type)throw new Error("User Error: Expression cannot consist only of an operator.");return{tokens:[{type:"number",value:e[0].value}],computed:0,prevComputeNext:{start:0,end:1},description:"resolve parentheses"}}for(var t=void 0,r=e.length-1;r>=0;r--)if("^"===e[r].value){t=r;break}if(void 0===t)for(var n=0;n<e.length;n++)if("*"===e[n].value||"/"===e[n].value){t=n;break}if(void 0===t)for(var o=0;o<e.length;o++)if("+"===e[o].value||"-"===e[o].value){t=o;break}if(void 0===t)throw new Error("User Error: Multiple tokens in expression with no operator.");if(0===t)throw new Error("User Error: Expression cannot start with an operator.");if(t===e.length-1)throw new Error("User Error: Expression cannot end with an operator.");var a=void 0,l=e[t-1],u=e[t+1],i=e[t],s="";if("number"!==typeof l.value||"number"!==typeof u.value)throw new Error('User Error: "'+i.value+'" operator requires numeric operands.');var c=void 0;if("^"===i.value){if(l.value<0&&u.value%1!==0)throw new Error("User Error: "+l.value.toString()+"^"+u.value.toString()+" results in an imaginary number, which is not supported.");c=Math.pow(l.value,u.value),s="raise "+h(l.value,3)+" to the "+function(e){var t=e.toString();if(e%1!==0)return t+"th";var r=parseInt(t.charAt(t.length-1)),n=e%100,o="th";return 1===r&&11!==n?o="st":2===r&&12!==n?o="nd":3===r&&13!==n&&(o="rd"),t+o}(u.value)+" power"}else"*"===i.value?(c=l.value*u.value,s="multiply "+h(l.value,3)+" by "+h(u.value,3)):"/"===i.value?(c=l.value/u.value,s="divide "+h(l.value,3)+" by "+h(u.value,3)):"+"===i.value?(c=l.value+u.value,s="add "+h(u.value,3)+" to "+h(l.value,3)):"-"===i.value&&(c=l.value-u.value,s="subtract "+h(u.value,3)+" from "+h(l.value,3));if(void 0===c)throw new Error('Internal Error: "'+i.value+'" operator not recognized.');if(void 0===(a={type:"number",value:c}))throw new Error("Internal Error: performSimpleOperation function failed.");var p=e.slice(0,t-1).map((function(e){return{type:e.type,value:e.value}})),v=e.slice(t+2).map((function(e){return{type:e.type,value:e.value}})),d=p.concat([a]).concat(v);return console.log("PERFORMMATHOPERATION"),console.log("tokens",function(e){var t=e.map((function(e){return e.value.toString()})).join(" ");return t.split("neg (").join("-(")}(e)),console.log("computed",t-1),console.log("prevcomputenext",t-1,t+2),console.log(),{tokens:d,computed:t-1,prevComputeNext:{start:t-1,end:t+2},description:s}},f=function(e){for(var t=void 0,r=void 0,n=0;n<e.length;n++)if("("===e[n].value)t=n;else if(")"===e[n].value){r=n;break}if(void 0===t!==(void 0===r))throw new Error("User Error: Mismatched parentheses.");var o=void 0,a=void 0,l=void 0,u=void 0;if(void 0!==t&&void 0!==r){var i=e.slice(t+1,r);if(0===i.length)throw new Error("User Error: Parentheses cannot be empty.");var s=d(i),c=s.tokens,p=s.computed,h=s.prevComputeNext;if(l=s.description,1===c.length){var f=e.slice(0,t).map((function(e){return{type:e.type,value:e.value}})),m=e.slice(r+1).map((function(e){return{type:e.type,value:e.value}}));o=f.concat(c).concat(m),a=p+f.length,u={start:h.start+f.length,end:h.end+f.length+2}}else{var g=e.slice(0,t+1).map((function(e){return{type:e.type,value:e.value}})),b=e.slice(r).map((function(e){return{type:e.type,value:e.value}}));o=g.concat(c).concat(b),a=p+g.length,u={start:h.start+g.length,end:h.end+g.length}}}else{var x=d(e),j=x.tokens,y=x.computed,w=x.prevComputeNext;o=j,a=y,l=x.description,u=w}var E=v(o);return{tokens:E,computed:a-(o.length-E.length),description:l,prevComputeNext:u}},m=function(e){try{var t=function(e){for(var t=[],r=0;r<e.length;r++)if(isNaN(parseInt(e.charAt(r)))&&"."!==e.charAt(r)){if("^*/+-".includes(e.charAt(r)))t.push({type:"operator",value:e.charAt(r)});else if("()".includes(e.charAt(r)))t.push({type:"parentheses",value:e.charAt(r)});else if(" "!==e.charAt(r))throw new Error('User Error: "'+e[r]+'" is not a valid character.')}else{for(var n=r;n<e.length&&(!isNaN(parseInt(e.charAt(n)))||"."===e.charAt(n));)n+=1;var o=e.slice(r,n),a=p(o);t.push(a),r=n-1}return t}(e);if(t=function(e){for(var t=[],r=0;r<e.length;r++)if("-"===e[r].value){var n=!0;(r+1===e.length||"operator"===e[r+1].type||")"===e[r+1].value||r>0&&"number"===e[r-1].type)&&(n=!1),n?t.push({type:"operator",value:"neg"}):t.push({type:"operator",value:"-"})}else t.push({type:e[r].type,value:e[r].value});return t}(t),0===(t=v(t)).length)return[];if(1===t.length&&"operator"===t[0].type)throw new Error("User Error: Expression cannot consist of a single operator.");for(var r={tokens:t,description:"[Initial description.]",computeNext:null,computed:null},n=[];r.tokens.length>1;){var o=f(r.tokens),a=o.tokens,l=o.computed,u=o.prevComputeNext,i=o.description;r.computeNext=u,n.push(r),r={computeNext:null,tokens:a,description:i,computed:l}}return n.push(r),n}catch(s){return s}},g=(r(12),function(e){var t=e.initial,r=void 0!==t&&t,n=e.step,o=e.index,a=n.computeNext;null===a&&(a={start:0,end:0});var l=n.tokens.map((function(e,t){return{token:e,index:t}})),u=null!==n.computed?c[(o-1)%c.length]:"white",s=null!==n.computeNext?c[o%c.length]:"white",p=function(e){var t=e.token,r=e.index,o=t.value;return"neg"===o&&(o="-"),"number"===typeof o&&(o=1===n.tokens.length?h(o,10):h(o,3)),r>0&&"neg"!==n.tokens[r-1].value&&(o=" "+o),null!==n.computed&&r===n.computed?Object(i.jsx)("span",{className:"computed",style:{color:u,fontWeight:"bold"},children:o},r):Object(i.jsx)("span",{children:o},r)},v=l.slice(0,a.start).map(p),d=l.slice(a.end).map(p),f=l.slice(a.start,a.end).map(p),m=Object(i.jsx)(i.Fragment,{});return f.length>0&&(m=Object(i.jsx)("span",{className:"compute-next",style:{border:"2px solid "+s},children:f})),Object(i.jsx)("div",{className:r?"step step-initial":"step step-next",children:Object(i.jsxs)("span",{className:"expression",children:[v,m,d]})})}),b=(r(13),function(e){var t=e.description,r=e.index,n=c[r%c.length];return Object(i.jsx)("div",{className:"description",style:{color:n},children:t})}),x=(r(14),function(e){var t=e.error;return null===t?null:Object(i.jsx)("div",{className:"error",children:function(e){var t=e;return t.split("Internal Error").length>1||"."===(t=(t=t.split("User Error: ").join("")).toLowerCase()).charAt(t.length-1)&&(t=t.slice(0,t.length-1)),t}(t.message)})}),j=(r(15),function(){var e=o.a.useState(""),t=Object(u.a)(e,2),r=t[0],n=t[1],a=o.a.useState(null),l=Object(u.a)(a,2),c=l[0],p=l[1],v=o.a.useState(null),h=Object(u.a)(v,2),d=h[0],f=h[1],j=function(e){n(e);var t=m(e);t instanceof Error?(p(null),f(t)):(p(t),f(null))};o.a.useEffect((function(){j("1-2+-(4/2-1.5)^-3*2")}),[]);return Object(i.jsxs)("div",{className:"solver",children:[Object(i.jsxs)("div",{className:"solver-left",children:[Object(i.jsx)(s,{value:r,onChange:function(e){var t=e.target.value;j(t)}}),null!==c&&c.length>1?c.slice(1).map((function(e,t){return Object(i.jsx)(b,{description:e.description,index:t},t)})):null]}),Object(i.jsx)("div",{className:"solver-right",children:null!==c&&0===c.length?null:null!==c&&c.length>0?Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)(g,{initial:!0,step:c[0],index:0},0),c.slice(1).map((function(e,t){return Object(i.jsx)(g,{step:e,index:t+1},t+1)}))]}):null}),Object(i.jsx)(x,{error:d})]})}),y=(r(16),function(){return Object(i.jsx)("div",{className:"app",children:Object(i.jsx)(j,{})})});l.a.render(Object(i.jsx)(o.a.StrictMode,{children:Object(i.jsx)(y,{})}),document.getElementById("root"))}],[[17,1,2]]]);
//# sourceMappingURL=main.dc27bb3c.chunk.js.map