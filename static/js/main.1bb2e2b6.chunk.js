(this["webpackJsonpstep-solve"]=this["webpackJsonpstep-solve"]||[]).push([[0],[,,,,,,,,,function(e,r,t){},function(e,r,t){},,function(e,r,t){},function(e,r,t){},function(e,r,t){},function(e,r,t){},function(e,r,t){},function(e,r,t){"use strict";t.r(r);var n=t(1),o=t.n(n),a=t(4),i=t.n(a),l=(t(9),t(2)),u=(t(10),t(0)),s=function(e){var r=e.value,t=e.onChange;return Object(u.jsx)("div",{className:"input",children:Object(u.jsx)("input",{type:"text",value:r,onChange:function(e){return t(e)}})})},c=["#CC0B00","#E69138","#F1C231","#6AA850","#3D85C6","#674FA7"],p=function(e){if(isNaN(Number(e))||""===e)throw new Error("User Error: Literal not recognized.");return 2===e.split(".").length?{type:"number",value:parseFloat(e)}:{type:"number",value:parseInt(e)}},v=function(e){for(var r=[],t=0;t<e.length;t++)if("neg"===e[t].value){if(t+1>=e.length)throw new Error('Internal Error: Expression cannot end with a "neg" operator.');var n=e[t+1];if("("===n.value)r.push({type:"operator",value:"neg"});else{if("number"!=typeof n.value)throw new Error('Internal Error: "neg"s must be followed by "(" or a number.');var o=-1*n.value;0===n.value&&(o=0),r.push({type:"number",value:o}),t+=1}}else r.push({type:e[t].type,value:e[t].value});return r},h=function(e){if(1===e.length){if("operator"===e[0].type)throw new Error("User Error: Expression cannot consist only of an operator.");return[{type:"number",value:e[0].value}]}for(var r=[["^"],["*","/"],["+","-"]],t=void 0,n=0;n<r.length;n++){for(var o=0;o<e.length;o+=1)if(r[n].includes(e[o].value)){t=o;break}if(void 0!==t)break}if(void 0===t)throw new Error("User Error: Multiple tokens in expression with no operator.");if(0===t)throw new Error("User Error: Expression cannot start with an operator.");if(t===e.length-1)throw new Error("User Error: Expression cannot end with an operator.");var a=void 0,i=e[t-1],l=e[t+1],u=e[t];if("number"!==typeof i.value||"number"!==typeof l.value)throw new Error('User Error: "'+u.value+'" operator requires numeric operands.');var s=void 0;if("^"===u.value){if(i.value<0&&l.value%1!==0)throw new Error("User Error: "+i.value.toString()+"^"+l.value.toString()+" results in an imaginary number, which is not supported.");s=Math.pow(i.value,l.value)}else"*"===u.value?s=i.value*l.value:"/"===u.value?s=i.value/l.value:"+"===u.value?s=i.value+l.value:"-"===u.value&&(s=i.value-l.value);if(void 0===s)throw new Error('Internal Error: "'+u.value+'" operator not recognized.');if(void 0===(a={type:"number",value:s}))throw new Error("Internal Error: performSimpleOperation function failed.");var c=e.slice(0,t-1).map((function(e){return{type:e.type,value:e.value}})),p=e.slice(t+2).map((function(e){return{type:e.type,value:e.value}}));return c.concat([a]).concat(p)},f=function(e){for(var r=void 0,t=void 0,n=0;n<e.length;n++)if("("===e[n].value)r=n;else if(")"===e[n].value){t=n;break}if(void 0===r!==(void 0===t))throw new Error("User Error: Mismatched parentheses.");var o=void 0;if(void 0!==r&&void 0!==t){var a=e.slice(r+1,t);if(0===a.length)throw new Error("User Error: Parentheses cannot be empty.");var i=h(a);if(1===i.length&&"number"===i[0].type){var l=e.slice(0,r).map((function(e){return{type:e.type,value:e.value}})),u=e.slice(t+1).map((function(e){return{type:e.type,value:e.value}}));o=l.concat(i).concat(u)}else{var s=e.slice(0,r+1).map((function(e){return{type:e.type,value:e.value}})),c=e.slice(t).map((function(e){return{type:e.type,value:e.value}}));o=s.concat(i).concat(c)}}else o=h(e);if(void 0!==o)return o=v(o);throw new Error('Internal Error: "performOperation" function failed.')},d=function(e,r){var t=e;return t=t%1!==0&&t.toString().split(".")[1].length>r?parseFloat(e.toFixed(r)).toString()+"...":e.toString()},g=function(e,r){for(var t=e.length-1,n=r.length-1;t>=0&&n>=0&&e[t].value===r[n].value;)t-=1,n-=1;"operator"===e[t].type&&(t+=1,n+=1);var o={start:n,end:n+1},a=t;if(")"===e[t].value){for(;a>=0&&"("!==e[a].value;)a-=1;a>0&&"neg"===e[a-1].value&&(a-=1)}else a-=2;for(var i={start:a,end:t+1},l=e.slice(a,t+1),u=0;u<l.length;u++){var s=l[u];if("operator"===s.type&&"neg"!==s.value)break}0===u||l.length;var c=void 0;if(0===u||u===l.length-1)throw new Error('Internal Error: "describeOperation" function recieved a misplaced operator.');if(u===l.length)c="resolve parentheses";else if(u<l.length){var p=l[u-1].value,v=l[u+1].value;if("number"!==typeof p||"number"!==typeof v)throw new Error('Internal Error: "describeOperation" function received invalid operands.');"^"===l[u].value?c="raise "+d(p,3)+" to the "+function(e){var r=e.toString();if(e%1!==0)return r+"th";var t=parseInt(r.charAt(r.length-1)),n=e%100,o="th";return 1===t&&11!==n?o="st":2===t&&12!==n?o="nd":3===t&&13!==n&&(o="rd"),r+o}(v)+" power":"*"===l[u].value?c="multiply "+d(p,3)+" by "+d(v,3):"/"===l[u].value?c="divide "+d(p,3)+" by "+d(v,3):"+"===l[u].value?c="add "+d(v,3)+" to "+d(p,3):"-"===l[u].value&&(c="subtract "+d(v,3)+" from "+d(p,3))}if(void 0===c)throw new Error('Internal Error: function "describeOperation" failed.');return{operationInput:i,operationOutput:o,operationDescription:c}},m=function(e){try{var r=function(e){for(var r=[],t=0;t<e.length;t++)if(isNaN(parseInt(e.charAt(t)))&&"."!==e.charAt(t)){if("^*/+-".includes(e.charAt(t)))r.push({type:"operator",value:e.charAt(t)});else if("()".includes(e.charAt(t)))r.push({type:"parentheses",value:e.charAt(t)});else if(" "!==e.charAt(t))throw new Error('User Error: "'+e[t]+'" is not a valid character.')}else{for(var n=t;n<e.length&&(!isNaN(parseInt(e.charAt(n)))||"."===e.charAt(n));)n+=1;var o=e.slice(t,n),a=p(o);r.push(a),t=n-1}return r}(e);if(r=function(e){for(var r=[],t=0;t<e.length;t++)if("-"===e[t].value){var n=!0;(t+1===e.length||"operator"===e[t+1].type||")"===e[t+1].value||t>0&&"number"===e[t-1].type||t+2<e.length&&"^"===e[t+2].value)&&(n=!1),n?r.push({type:"operator",value:"neg"}):r.push({type:"operator",value:"-"})}else r.push({type:e[t].type,value:e[t].value});return r}(r),0===(r=v(r)).length)return[];if(1===r.length&&"operator"===r[0].type)throw new Error("User Error: Expression cannot consist of a single operator.");for(var t={tokens:r,description:"[Initial description.]",computeNext:null,computed:null},n=[];t.tokens.length>1;){var o=f(t.tokens),a=g(t.tokens,o),i=a.operationInput,l=a.operationOutput,u=a.operationDescription;t.computeNext=i,n.push(t),t={computeNext:null,tokens:o,description:u,computed:l}}return n.push(t),n}catch(s){return s}},b=(t(12),function(e){var r=e.initial,t=void 0!==r&&r,n=e.step,o=e.index,a=n.computeNext||{start:0,end:0},i=n.tokens.map((function(e,r){return{token:e,index:r}})),l=n.computed?c[(o-1)%c.length]:"white",s=n.computeNext?c[o%c.length]:"white",p=function(e){var r=e.token,t=e.index,o=r.value;return"number"===typeof o&&(o=1===n.tokens.length?d(o,10):d(o,3)),t>0&&"neg"!==n.tokens[t-1].value&&(o=" "+o)," neg"===o&&(o=" -"),null!==n.computed&&t===n.computed.start?Object(u.jsx)("span",{className:"computed",style:{color:l,fontWeight:"bold"},children:o},t):Object(u.jsx)("span",{children:o},t)},v=i.slice(0,a.start).map(p),h=i.slice(a.end).map(p),f=i.slice(a.start,a.end).map(p),g=Object(u.jsx)(u.Fragment,{});return f.length>0&&(g=Object(u.jsx)("span",{className:"compute-next",style:{border:"2px solid "+s},children:f})),Object(u.jsx)("div",{className:t?"step step-initial":"step step-next",children:Object(u.jsxs)("span",{className:"expression",children:[v,g,h]})})}),y=(t(13),function(e){var r=e.description,t=e.index,n=c[t%c.length];return Object(u.jsx)("div",{className:"description",style:{color:n},children:r})}),w=(t(14),function(e){var r=e.error;return null===r?null:Object(u.jsx)("div",{className:"error",children:function(e){var r=e;return r.split("Internal Error").length>1||"."===(r=(r=r.split("User Error: ").join("")).toLowerCase()).charAt(r.length-1)&&(r=r.slice(0,r.length-1)),r}(r.message)})}),j=(t(15),function(){var e=o.a.useState(""),r=Object(l.a)(e,2),t=r[0],n=r[1],a=o.a.useState(null),i=Object(l.a)(a,2),c=i[0],p=i[1],v=o.a.useState(null),h=Object(l.a)(v,2),f=h[0],d=h[1],g=function(e){n(e);var r=m(e);r instanceof Error?(p(null),d(r)):(p(r),d(null))};o.a.useEffect((function(){g("1-2+-(4/2-1.5)^-3*2")}),[]);return Object(u.jsxs)("div",{className:"solver",children:[Object(u.jsxs)("div",{className:"solver-left",children:[Object(u.jsx)(s,{value:t,onChange:function(e){var r=e.target.value;g(r)}}),null!==c&&c.length>1?c.slice(1).map((function(e,r){return Object(u.jsx)(y,{description:e.description,index:r},r)})):null]}),Object(u.jsx)("div",{className:"solver-right",children:null!==c&&0===c.length?null:null!==c&&c.length>0?Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(b,{initial:!0,step:c[0],index:0},0),c.slice(1).map((function(e,r){return Object(u.jsx)(b,{step:e,index:r+1},r+1)}))]}):null}),Object(u.jsx)(w,{error:f})]})}),E=(t(16),function(){return Object(u.jsx)("div",{className:"app",children:Object(u.jsx)(j,{})})});i.a.render(Object(u.jsx)(o.a.StrictMode,{children:Object(u.jsx)(E,{})}),document.getElementById("root"))}],[[17,1,2]]]);
//# sourceMappingURL=main.1bb2e2b6.chunk.js.map